{% extends 'base.html' %}
{% block title %}Change Password - EventApp{% endblock %}
{% block content %}
  <div class="welcome-section">
    <h1 class="welcome-title">Change Password</h1>
    <p class="welcome-subtitle">Update your password for security</p>
  </div>
  
  <div class="alert alert-warning">
    <i class="fas fa-exclamation-triangle"></i>
    <strong>Security Notice:</strong> Your password has been reset by an administrator. Please change it to a secure password of your choice.
  </div>
  
  <form method="post">
    <div class="form-group">
      <label for="current_password">Current Password:</label>
      <input type="password" class="form-control" id="current_password" name="current_password" required>
      <small class="form-text text-muted">Enter your current password (the one provided by the administrator).</small>
    </div>
    
    <div class="form-group">
      <label for="new_password">New Password:</label>
      <input type="password" class="form-control" id="new_password" name="new_password" required minlength="6">
      <small class="form-text text-muted">Password must be at least 6 characters long.</small>
    </div>
    
    <div class="form-group">
      <label for="confirm_password">Confirm New Password:</label>
      <input type="password" class="form-control" id="confirm_password" name="confirm_password" required>
      <small class="form-text text-muted">Re-enter your new password to confirm.</small>
    </div>
    
    <button type="submit" class="btn btn-primary">
      <i class="fas fa-key"></i> Change Password
    </button>
  </form>
  
  <div class="mt-4">
    <div class="alert alert-info">
      <h6><i class="fas fa-info-circle"></i> Password Requirements:</h6>
      <ul class="mb-0">
        <li>At least 6 characters long</li>
        <li>Choose a password you can remember</li>
        <li>Consider using a mix of letters, numbers, and symbols</li>
        <li>Don't share your password with others</li>
      </ul>
    </div>
  </div>
{% endblock %}

{% block scripts %}
<script>
$(document).ready(function() {
    // Password confirmation validation
    $('#confirm_password').on('input', function() {
        const newPassword = $('#new_password').val();
        const confirmPassword = $(this).val();
        
        if (newPassword !== confirmPassword) {
            $(this).addClass('is-invalid');
            if (!$(this).next('.invalid-feedback').length) {
                $(this).after('<div class="invalid-feedback">Passwords do not match.</div>');
            }
        } else {
            $(this).removeClass('is-invalid');
            $(this).next('.invalid-feedback').remove();
        }
    });
    
    // Form submission validation
    $('form').on('submit', function(e) {
        const newPassword = $('#new_password').val();
        const confirmPassword = $('#confirm_password').val();
        
        if (newPassword !== confirmPassword) {
            e.preventDefault();
            alert('Passwords do not match. Please check and try again.');
            return false;
        }
        
        if (newPassword.length < 6) {
            e.preventDefault();
            alert('Password must be at least 6 characters long.');
            return false;
        }
    });
});
</script>
{% endblock %}
