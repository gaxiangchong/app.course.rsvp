{% extends 'base.html' %}
{% block title %}Profile - EventApp{% endblock %}
{% block content %}
  <div class="welcome-section">
    <div class="d-flex justify-content-between align-items-center">
      <div>
        <h1 class="welcome-title">My Profile</h1>
        <p class="welcome-subtitle">Manage your account settings</p>
      </div>
      {% if current_user.is_admin %}
        <a href="{{ url_for('create_event') }}" class="btn btn-primary">
          <i class="fas fa-plus mr-2"></i>Create Event
        </a>
      {% endif %}
    </div>
  </div>
  <div class="row">
    <div class="col-md-8">
      <form method="post">
        <!-- Personal Information Section -->
        <div class="form-section">
          <h5><i class="fas fa-user mr-2"></i>Personal Information</h5>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="first_name">First Name</label>
                <input type="text" class="form-control" id="first_name" name="first_name" value="{{ current_user.first_name or '' }}" placeholder="Enter your first name">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="last_name">Last Name</label>
                <input type="text" class="form-control" id="last_name" name="last_name" value="{{ current_user.last_name or '' }}" placeholder="Enter your last name">
              </div>
            </div>
          </div>
          
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text" class="form-control" id="username" name="username" value="{{ current_user.username }}" required placeholder="Choose a unique username">
          </div>
          
          <div class="form-group">
            <label for="email">Email Address</label>
            <input type="email" class="form-control" id="email" name="email" value="{{ current_user.email }}" required placeholder="your.email@example.com">
          </div>
          
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="phone" value="{{ current_user.phone or '' }}" placeholder="+1 (555) 123-4567">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="timezone">Timezone</label>
                <select class="form-control" id="timezone" name="timezone">
                  <option value="UTC" {% if current_user.timezone == 'UTC' %}selected{% endif %}>UTC (Coordinated Universal Time)</option>
                  <option value="America/New_York" {% if current_user.timezone == 'America/New_York' %}selected{% endif %}>Eastern Time (ET)</option>
                  <option value="America/Chicago" {% if current_user.timezone == 'America/Chicago' %}selected{% endif %}>Central Time (CT)</option>
                  <option value="America/Denver" {% if current_user.timezone == 'America/Denver' %}selected{% endif %}>Mountain Time (MT)</option>
                  <option value="America/Los_Angeles" {% if current_user.timezone == 'America/Los_Angeles' %}selected{% endif %}>Pacific Time (PT)</option>
                  <option value="Europe/London" {% if current_user.timezone == 'Europe/London' %}selected{% endif %}>London (GMT)</option>
                  <option value="Europe/Paris" {% if current_user.timezone == 'Europe/Paris' %}selected{% endif %}>Paris (CET)</option>
                  <option value="Asia/Tokyo" {% if current_user.timezone == 'Asia/Tokyo' %}selected{% endif %}>Tokyo (JST)</option>
                  <option value="Asia/Shanghai" {% if current_user.timezone == 'Asia/Shanghai' %}selected{% endif %}>Shanghai (CST)</option>
                  <option value="Asia/Singapore" {% if current_user.timezone == 'Asia/Singapore' %}selected{% endif %}>Singapore (SGT)</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Location Information Section -->
        <div class="form-section">
          <h5><i class="fas fa-map-marker-alt mr-2"></i>Location Information</h5>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label for="country">Country</label>
                <input type="text" class="form-control" id="country" name="country" value="{{ current_user.country or '' }}" placeholder="United States">
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label for="city">City</label>
                <input type="text" class="form-control" id="city" name="city" value="{{ current_user.city or '' }}" placeholder="New York">
              </div>
            </div>
          </div>
        </div>
        
        <!-- Notification Preferences Section -->
        <div class="form-section">
          <h5><i class="fas fa-bell mr-2"></i>Notification Preferences</h5>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="email_notifications" name="email_notifications" {% if current_user.email_notifications %}checked{% endif %}>
            <label class="form-check-label" for="email_notifications">
              <strong>Email Notifications</strong>
              <small class="d-block text-muted">Receive event updates and reminders via email</small>
            </label>
          </div>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="push_notifications" name="push_notifications" {% if current_user.push_notifications %}checked{% endif %}>
            <label class="form-check-label" for="push_notifications">
              <strong>Push Notifications</strong>
              <small class="d-block text-muted">Get instant notifications on your device</small>
            </label>
          </div>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="time_format_24h" name="time_format_24h" {% if current_user.time_format_24h %}checked{% endif %}>
            <label class="form-check-label" for="time_format_24h">
              <strong>24-Hour Time Format</strong>
              <small class="d-block text-muted">Use 24-hour format instead of 12-hour (AM/PM)</small>
            </label>
          </div>
        </div>
        
        <!-- Privacy Settings Section -->
        <div class="form-section">
          <h5><i class="fas fa-shield-alt mr-2"></i>Privacy Settings</h5>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="privacy_show_city" name="privacy_show_city" {% if current_user.privacy_show_city %}checked{% endif %}>
            <label class="form-check-label" for="privacy_show_city">
              <strong>Show My City</strong>
              <small class="d-block text-muted">Allow other users to see your city location</small>
            </label>
          </div>
          <div class="form-check">
            <input type="checkbox" class="form-check-input" id="privacy_show_full_name" name="privacy_show_full_name" {% if current_user.privacy_show_full_name %}checked{% endif %}>
            <label class="form-check-label" for="privacy_show_full_name">
              <strong>Show My Full Name</strong>
              <small class="d-block text-muted">Display your complete name to other users</small>
            </label>
          </div>
        </div>
        
        <div class="text-center">
          <button type="submit" class="btn btn-primary btn-lg">
            <i class="fas fa-save mr-2"></i>Update Profile
          </button>
        </div>
      </form>
    </div>
    <div class="col-md-4">
      <div class="card">
        <div class="card-header">
          <h5>Account Information</h5>
        </div>
        <div class="card-body">
          <p><strong>Member since:</strong> {{ current_user.created_at.strftime('%B %d, %Y') }}</p>
          <p><strong>Account type:</strong> {% if current_user.is_admin %}Organizer{% else %}Attendee{% endif %}</p>
          <p><strong>Total RSVPs:</strong> {{ current_user.rsvps|length }}</p>
          {% if current_user.is_admin %}
            <p><strong>Events created:</strong> {{ current_user.events|length }}</p>
          {% endif %}
          <p><strong>Display name:</strong> {{ current_user.display_name }}</p>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
